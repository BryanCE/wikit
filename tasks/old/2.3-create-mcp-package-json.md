# Task 2.3: Create MCP package.json

## Purpose

Configure package.json for the MCP server with proper metadata, dependencies, and build configuration.

## Complete package.json

Replace the existing package.json with:

```json
{
  "name": "@bryance/wikit-mcp",
  "version": "0.1.0",
  "description": "MCP server for Wiki.js management via AI",
  "type": "module",
  "main": "./dist/index.js",
  "bin": {
    "wikit-mcp": "./dist/index.js"
  },
  "files": ["dist"],
  "scripts": {
    "build": "tsc",
    "dev": "bun run src/index.ts",
    "prepublishOnly": "bun run build"
  },
  "keywords": ["mcp", "model-context-protocol", "wikijs", "wiki.js", "ai"],
  "author": "Dale Henderson",
  "license": "MIT",
  "repository": {
    "type": "git",
    "url": "https://github.com/bryance/wikit-mcp"
  },
  "dependencies": {
    "@bryance/wikit": "^0.1.0",
    "@modelcontextprotocol/sdk": "^0.5.0",
    "dotenv": "^16.4.5"
  },
  "devDependencies": {
    "@types/node": "^20.0.0",
    "typescript": "^5.0.0"
  }
}
```

## Key Fields Explained

### Basic Info
```json
{
  "name": "@bryance/wikit-mcp",
  "version": "0.1.0",
  "description": "MCP server for Wiki.js management via AI"
}
```

### Module Configuration
```json
{
  "type": "module",           // Use ES modules
  "main": "./dist/index.js"   // Entry point for imports
}
```

### Binary Configuration
```json
{
  "bin": {
    "wikit-mcp": "./dist/index.js"
  }
}
```
This allows users to run `wikit-mcp` from command line after global install.

### Files to Publish
```json
{
  "files": ["dist"]
}
```
Only publish the built `dist/` directory.

### Scripts
```json
{
  "scripts": {
    "build": "tsc",                    // Compile TypeScript
    "dev": "bun run src/index.ts",     // Run directly with Bun
    "prepublishOnly": "bun run build"  // Auto-build before publishing
  }
}
```

### Dependencies

**Runtime dependencies:**
- `@bryance/wikit` - Your wikit package (the one you published)
- `@modelcontextprotocol/sdk` - MCP SDK for server creation
- `dotenv` - Load environment variables

**Dev dependencies:**
- `@types/node` - Node.js type definitions
- `typescript` - TypeScript compiler

## Installation

After updating package.json, install any missing dependencies:

```bash
bun install
```

## Verification

Check that:
- [ ] Package name is `@bryance/wikit-mcp`
- [ ] `type: "module"` is set
- [ ] `bin` field points to `./dist/index.js`
- [ ] `@bryance/wikit` is in dependencies
- [ ] `@modelcontextprotocol/sdk` is in dependencies
- [ ] Build script uses `tsc`
- [ ] Repository URL is correct

## Test Scripts

```bash
# Test that dev script works (may error if .env not configured, that's ok)
bun run dev

# Test that build script works (will compile once tsconfig.json is set up)
bun run build
```

## Next Steps

Move to Task 2.4 to implement the MCP server code with tool handlers.
