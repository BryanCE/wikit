# Task 1.6: Publish to npm

## Purpose

Publish the package to npm as `@bryance/wikit` so it can be installed globally or as a dependency.

## Prerequisites

- [ ] Completed Tasks 1.1 through 1.5
- [ ] Build passes with no errors
- [ ] README is complete
- [ ] package.json has correct metadata
- [ ] You have an npm account

## Steps

### 1. Login to npm

```bash
npm login
```

This will prompt for:
- Username
- Password
- Email
- 2FA code (if enabled)

### 2. Verify Package Contents

Run a dry-run to see what will be published:

```bash
npm publish --dry-run
```

This will show:
- Files that will be included
- Package size
- Tarball contents

Check that:
- ✅ `dist/` directory is included
- ✅ `README.md` is included
- ✅ `package.json` is included
- ❌ `src/` directory is NOT included (unless you want it)
- ❌ `.env` files are NOT included
- ❌ `node_modules/` is NOT included

### 3. Publish Package

```bash
npm publish --access public
```

Use `--access public` because this is a scoped package (@bryance/wikit).

### 4. Verify Publication

Check that the package is live:

```bash
npm view @bryance/wikit
```

This should show:
- Package name and version
- Description
- Available dist-tags
- Dependencies
- Repository URL

### 5. Test Installation

Test installing your package:

```bash
# Test global install
npm install -g @bryance/wikit

# Test local install
npm install @bryance/wikit

# Verify CLI works
wikit --help
```

### 6. Test Imports

Create a test file to verify imports work:

```typescript
// test.ts
import { listPages } from '@bryance/wikit/commands';
import type { Page } from '@bryance/wikit/types';

console.log('Import successful!');
```

## Troubleshooting

### Permission Denied
- Make sure you're logged in: `npm whoami`
- Check package name isn't taken: `npm view @bryance/wikit`

### Package Not Found
- Wait a few minutes for npm to update
- Clear npm cache: `npm cache clean --force`

### Wrong Files Published
- Check `.npmignore` or `files` field in package.json
- Run dry-run again to verify

## Version Management

For future updates:

```bash
# Bump patch version (0.1.0 -> 0.1.1)
npm version patch

# Bump minor version (0.1.0 -> 0.2.0)
npm version minor

# Bump major version (0.1.0 -> 1.0.0)
npm version major

# Then publish
npm publish
```

## Verification Checklist

- [ ] npm login successful
- [ ] Dry-run shows correct files
- [ ] Package published successfully
- [ ] Package visible on npmjs.com
- [ ] Global install works
- [ ] Local install works
- [ ] CLI command works
- [ ] Imports work from all export paths

## Next Steps

Phase 1 is complete! Move to Phase 2, Task 2.1 to create the MCP server repository.
