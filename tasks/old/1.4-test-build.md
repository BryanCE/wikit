# Task 1.4: Test Build

## Purpose

Verify that the build process generates the correct output structure with all necessary files.

## Steps

### 1. Clean Previous Build

```bash
rm -rf dist
```

### 2. Run Build

```bash
bun run build
```

This should run the TypeScript compiler (tsc) and generate all files in dist/.

### 3. Verify Directory Structure

The dist/ directory should mirror your src/ structure:

```
dist/
├── index.js
├── index.d.ts
├── index.d.ts.map
├── api/
│   ├── index.js
│   ├── index.d.ts
│   ├── index.d.ts.map
│   ├── client.js
│   ├── client.d.ts
│   └── ... (all API files)
├── commands/
│   ├── index.js
│   ├── index.d.ts
│   ├── index.d.ts.map
│   ├── listPages.js
│   ├── listPages.d.ts
│   └── ... (all command files)
├── types/
│   ├── index.js
│   ├── index.d.ts
│   └── ... (all type files)
├── utils/
│   ├── index.js
│   ├── index.d.ts
│   └── ...
├── config/
│   ├── index.js
│   ├── index.d.ts
│   └── ...
└── tui/
    └── ... (all TUI components)
```

### 4. Check File Types

Verify these files exist:
- ✅ `.js` files - Compiled JavaScript
- ✅ `.d.ts` files - TypeScript declarations
- ✅ `.d.ts.map` files - Source maps for types

### 5. Verify Barrel Exports

Check that barrel export index files are present:
- ✅ `dist/api/index.js` and `dist/api/index.d.ts`
- ✅ `dist/commands/index.js` and `dist/commands/index.d.ts`
- ✅ `dist/types/index.js` and `dist/types/index.d.ts`
- ✅ `dist/utils/index.js` and `dist/utils/index.d.ts`
- ✅ `dist/config/index.js` and `dist/config/index.d.ts`

### 6. Test with ls

```bash
# Check top-level structure
ls dist

# Check barrel exports exist
ls dist/*/index.d.ts

# Count total files
find dist -type f | wc -l
```

## Common Issues

### Missing .d.ts Files
- Ensure `declaration: true` in tsconfig.json
- Ensure `tsc` is used for build (not just bundler)

### Wrong Directory Structure
- Check `rootDir: "./src"` in tsconfig.json
- Check `outDir: "./dist"` in tsconfig.json

### Missing Barrel Exports
- Verify you created all index.ts files in Task 1.1
- Check exports are not commented out

## Verification Checklist

- [ ] dist/ directory exists
- [ ] All .js files generated
- [ ] All .d.ts files generated
- [ ] Barrel export index files present
- [ ] Directory structure mirrors src/
- [ ] No build errors in terminal

## Next Steps

Move to Task 1.5 to create/update README with programmatic usage examples.
