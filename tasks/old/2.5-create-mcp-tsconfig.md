# Task 2.5: Create MCP tsconfig.json

## Purpose

Configure TypeScript for the MCP server to compile correctly.

## Complete tsconfig.json

Replace or create `tsconfig.json`:

```json
{
  "compilerOptions": {
    "target": "ES2022",
    "module": "ES2022",
    "lib": ["ES2022"],
    "moduleResolution": "bundler",
    "outDir": "./dist",
    "rootDir": "./src",
    "strict": true,
    "esModuleInterop": true,
    "skipLibCheck": true,
    "resolveJsonModule": true
  },
  "include": ["src/**/*"],
  "exclude": ["node_modules", "dist"]
}
```

## Key Differences from Wikit tsconfig

The MCP server config is simpler because:
- **No JSX** - Not using React/Ink
- **No declarations needed** - This is an executable, not a library
- **No declaration maps** - No need for source maps

## Configuration Explained

### Compiler Options

```json
{
  "target": "ES2022",           // Modern JavaScript features
  "module": "ES2022",           // ES modules
  "lib": ["ES2022"],            // ES2022 standard library
  "moduleResolution": "bundler" // Bun/modern bundler resolution
}
```

### Output

```json
{
  "outDir": "./dist",   // Compiled output goes here
  "rootDir": "./src"    // Source code location
}
```

### Type Safety

```json
{
  "strict": true,              // All strict type-checking options
  "esModuleInterop": true,     // Better CommonJS/ES module interop
  "skipLibCheck": true,        // Skip type checking of .d.ts files
  "resolveJsonModule": true    // Allow importing JSON files
}
```

### Include/Exclude

```json
{
  "include": ["src/**/*"],              // Compile everything in src/
  "exclude": ["node_modules", "dist"]   // Don't compile these
}
```

## Test the Configuration

### 1. Build the Project

```bash
bun run build
```

This should:
- Compile all TypeScript files in `src/`
- Output JavaScript files to `dist/`
- Show any TypeScript errors

### 2. Check Output

```bash
ls dist
# Should see:
# - index.js
# - server.js
```

### 3. Verify Structure

The dist/ should mirror src/:
```
dist/
├── index.js
├── server.js
└── tools/
    └── (any tool files)
```

## Common Issues

### Module Resolution Errors
- Make sure `"type": "module"` is in package.json
- Check imports use `.js` extensions: `from "./server.js"`

### Missing Dependencies
- Ensure @bryance/wikit is installed
- Ensure @modelcontextprotocol/sdk is installed

### Cannot Find Module
- Check `moduleResolution` is set to `"bundler"`
- Verify imports are correct

## Verification Checklist

- [ ] tsconfig.json created/updated
- [ ] `bun run build` succeeds
- [ ] dist/ directory created
- [ ] index.js and server.js in dist/
- [ ] No TypeScript errors

## Next Steps

Move to Task 2.6 to create comprehensive README documentation for the MCP server.
